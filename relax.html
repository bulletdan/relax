<!DOCTYPE html>
<html lang="zh">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
<title>放松一下</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@1,300&family=Inter:wght@300&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}

body{
  font-family:'Inter',sans-serif;font-weight:300;
  background:#07080f;color:#e2d9c8;
  height:100vh;overflow:hidden;cursor:default;user-select:none;
}

/* 背景渐变 */
.bg{
  position:fixed;inset:0;z-index:0;
  background:linear-gradient(160deg,#06080e 0%,#0c1022 40%,#14102a 70%,#06080e 100%);
}

/* 光晕 */
.glow{position:fixed;border-radius:50%;filter:blur(90px);opacity:0.13;animation:float 14s ease-in-out infinite;z-index:1;}
.g1{width:520px;height:520px;background:#3a3575;top:-15%;left:-12%}
.g2{width:380px;height:380px;background:#6a3a1a;bottom:-12%;right:-10%;animation-delay:-7s}
.g3{width:280px;height:280px;background:#1a4a60;top:45%;left:55%;animation-delay:-4s}
@keyframes float{0%,100%{transform:translate(0,0)}40%{transform:translate(25px,-25px)}70%{transform:translate(-18px,18px)}}

/* 极光 */
.aurora{position:fixed;top:0;left:0;right:0;height:50%;z-index:1;pointer-events:none;overflow:hidden;}
.ab{position:absolute;width:200%;height:160px;border-radius:50%;filter:blur(50px) saturate(0.7);opacity:0;animation:auroraDrift linear infinite;}
.ab:nth-child(1){background:linear-gradient(90deg,transparent,rgba(50,170,110,0.08),rgba(70,150,190,0.11),transparent);top:8%;left:-50%;animation-duration:20s;}
.ab:nth-child(2){background:linear-gradient(90deg,transparent,rgba(110,70,190,0.08),rgba(50,150,170,0.09),transparent);top:22%;left:-50%;animation-duration:26s;animation-delay:-9s;}
.ab:nth-child(3){background:linear-gradient(90deg,transparent,rgba(70,190,150,0.06),rgba(90,90,210,0.08),transparent);top:4%;left:-50%;animation-duration:32s;animation-delay:-16s;}
@keyframes auroraDrift{0%{transform:translateX(0) skewY(-3deg);opacity:0}15%{opacity:1}85%{opacity:1}100%{transform:translateX(60%) skewY(3deg);opacity:0}}

/* 星星 */
.stars{position:fixed;inset:0;z-index:2;pointer-events:none}
.star{position:absolute;background:#fff;border-radius:50%;animation:twinkle 4s ease-in-out infinite alternate;}
.star.b{background:radial-gradient(circle,#fff 20%,rgba(200,220,255,0.4) 60%,transparent);box-shadow:0 0 8px rgba(200,220,255,0.7),0 0 24px rgba(180,200,255,0.3);animation:twinkleB 3s ease-in-out infinite alternate;}
@keyframes twinkle{0%{opacity:0.1;transform:scale(0.8)}100%{opacity:0.8;transform:scale(1.2)}}
@keyframes twinkleB{0%{opacity:0.4;transform:scale(0.9)}100%{opacity:1;transform:scale(1.4)}}

/* 月亮 */
.moon{
  position:fixed;top:7%;right:8%;z-index:3;
  width:58px;height:58px;border-radius:50%;
  background:radial-gradient(circle at 38% 38%,#fff8e8,#e8d89a 50%,#c8b870);
  box-shadow:0 0 28px rgba(240,220,140,0.22),0 0 70px rgba(220,200,100,0.08);
  animation:moonFloat 16s ease-in-out infinite;
}
@keyframes moonFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-10px)}}

/* 流星 */
.meteor{position:fixed;z-index:2;pointer-events:none;width:2px;background:linear-gradient(to bottom,rgba(255,255,255,0.85),transparent);animation:meteorFall linear infinite;opacity:0;}
@keyframes meteorFall{0%{transform:translate(0,0) rotate(-45deg);opacity:0}4%{opacity:1}18%{opacity:0;transform:translate(-320px,320px) rotate(-45deg)}100%{opacity:0}}

/* 涟漪 */
.ripple{position:fixed;z-index:5;pointer-events:none;border:1px solid rgba(226,217,200,0.35);border-radius:50%;animation:rippleOut 1.6s ease-out forwards;}
@keyframes rippleOut{0%{width:0;height:0;opacity:0.7}100%{width:280px;height:280px;opacity:0;margin-left:-140px;margin-top:-140px}}

/* 暗角 */
body::after{content:'';position:fixed;inset:0;background:radial-gradient(ellipse at center,transparent 38%,rgba(0,0,0,0.5) 100%);pointer-events:none;z-index:6;}

/* 主内容 */
.content{
  position:relative;z-index:10;height:100vh;
  display:flex;flex-direction:column;align-items:center;justify-content:center;
  gap:0;
}

/* 问候 */
.greeting{
  position:fixed;top:26px;left:50%;transform:translateX(-50%);
  font-size:0.6rem;letter-spacing:0.24em;text-transform:uppercase;
  color:rgba(226,217,200,0.38);z-index:10;
  opacity:0;animation:fadeIn 2s ease forwards 0.5s;
}

/* 诗句 */
.quote{
  font-family:'Cormorant Garamond',serif;font-style:italic;font-weight:300;
  font-size:1.5rem;text-align:center;max-width:420px;line-height:2.2;
  letter-spacing:0.05em;cursor:pointer;
  opacity:0;animation:fadeUp 2.5s ease forwards 0.8s;
  transition:opacity 0.5s ease,transform 0.5s ease;
  text-shadow:0 0 60px rgba(226,217,200,0.08);
}
.quote.fading{opacity:0;transform:translateY(8px)}
.quote-hint{
  margin-top:20px;font-size:0.55rem;letter-spacing:0.22em;text-transform:uppercase;
  color:rgba(226,217,200,0.2);
  opacity:0;animation:fadeIn 2s ease forwards 2s;
}

/* 底部控制区 */
.controls{
  position:fixed;bottom:36px;left:50%;transform:translateX(-50%);
  display:flex;align-items:center;gap:28px;z-index:10;
  opacity:0;animation:fadeIn 2s ease forwards 2.5s;
}

/* 播放按钮 */
.play-btn{
  width:44px;height:44px;border-radius:50%;
  border:1px solid rgba(226,217,200,0.2);
  background:rgba(255,255,255,0.04);
  backdrop-filter:blur(12px);
  cursor:pointer;display:flex;align-items:center;justify-content:center;
  transition:all 0.4s ease;
  color:rgba(226,217,200,0.7);
}
.play-btn:hover{border-color:rgba(226,217,200,0.4);background:rgba(255,255,255,0.08);transform:scale(1.06);}
.play-btn.playing{border-color:rgba(147,112,219,0.5);box-shadow:0 0 20px rgba(147,112,219,0.15);}
.play-btn svg{width:16px;height:16px;fill:currentColor;}

/* 音乐标签 */
.music-label{
  font-size:0.58rem;letter-spacing:0.2em;text-transform:uppercase;
  color:rgba(226,217,200,0.28);
  transition:color 0.4s;
}
.music-label.playing{color:rgba(226,217,200,0.5);}

/* 呼吸圆 — 右下角 */
.breath{
  position:fixed;bottom:34px;right:40px;z-index:10;
  display:flex;flex-direction:column;align-items:center;gap:8px;
  opacity:0;animation:fadeIn 2s ease forwards 3s;
}
.breath-ring{
  width:48px;height:48px;border-radius:50%;
  border:1px solid rgba(226,217,200,0.2);
  display:flex;align-items:center;justify-content:center;
  transition:transform 4s ease-in-out,border-color 4s ease-in-out,box-shadow 4s ease-in-out;
}
.breath-ring.inhale{transform:scale(1.55);border-color:rgba(110,170,210,0.45);box-shadow:0 0 18px rgba(110,170,210,0.12)}
.breath-dot{width:5px;height:5px;border-radius:50%;background:rgba(226,217,200,0.5);transition:transform 4s ease-in-out,background 4s ease-in-out;}
.breath-ring.inhale .breath-dot{transform:scale(1.8);background:rgba(110,170,210,0.8)}
.breath-text{font-size:0.55rem;letter-spacing:0.18em;color:rgba(226,217,200,0.3);transition:color 0.5s;}

/* 绿精灵 */
#elder{position:fixed;z-index:20;pointer-events:none;width:60px;height:90px;transition:transform 0.3s ease;}
#elder svg{width:60px;height:90px;overflow:visible;filter:drop-shadow(0 0 8px rgba(74,222,128,0.2)) drop-shadow(0 0 24px rgba(34,197,94,0.08));}
.elder-wave{animation:elderWave 0.7s ease;}
@keyframes elderWave{0%{transform:rotate(0)}30%{transform:rotate(-15deg)}70%{transform:rotate(10deg)}100%{transform:rotate(0)}}
.elder-stretch{animation:elderStretch 1.4s ease;}
@keyframes elderStretch{0%,100%{transform:scaleY(1)}35%{transform:scaleY(1.06) translateY(-4px)}65%{transform:scaleY(0.97)}}
.magic{position:fixed;z-index:19;pointer-events:none;border-radius:50%;animation:magicFade 1.2s ease-out forwards;}
@keyframes magicFade{0%{opacity:0.8;transform:scale(0.1)}100%{opacity:0;transform:scale(1) translate(var(--mx),var(--my))}}

@keyframes fadeIn{from{opacity:0}to{opacity:1}}
@keyframes fadeUp{from{opacity:0;transform:translateY(18px)}to{opacity:1;transform:translateY(0)}}

@media(max-width:600px){
  .quote{font-size:1.1rem;max-width:82vw;line-height:1.9}
  .moon{width:42px;height:42px;top:4%;right:5%}
  .breath{bottom:24px;right:20px}
}
</style>
</head>
<body>

<div class="bg"></div>
<div class="glow g1"></div><div class="glow g2"></div><div class="glow g3"></div>

<div class="aurora">
  <div class="ab"></div><div class="ab"></div><div class="ab"></div>
</div>

<div class="stars" id="stars"></div>
<div class="moon"></div>

<div class="meteor" style="top:4%;left:72%;height:80px;animation-duration:8s;animation-delay:0s"></div>
<div class="meteor" style="top:9%;left:48%;height:65px;animation-duration:11s;animation-delay:3s"></div>
<div class="meteor" style="top:6%;left:28%;height:95px;animation-duration:9s;animation-delay:6s"></div>
<div class="meteor" style="top:15%;left:82%;height:75px;animation-duration:13s;animation-delay:1.5s"></div>

<div class="greeting" id="greeting"></div>

<div class="content">
  <div class="quote" id="quote"></div>
  <div class="quote-hint">轻触换一句</div>
</div>

<div class="controls">
  <span class="music-label" id="musicLabel">Rain</span>
  <button class="play-btn" id="playBtn" title="播放 / 暂停">
    <svg id="playIcon" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></svg>
  </button>
  <span class="music-label" id="musicLabelR">自然白噪音</span>
</div>

<div class="breath">
  <div class="breath-ring" id="breathRing">
    <div class="breath-dot"></div>
  </div>
  <div class="breath-text" id="breathText">吸气</div>
</div>

<!-- 绿精灵 -->
<div id="elder">
<svg viewBox="0 0 60 90" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <radialGradient id="skinG" cx="40%" cy="30%"><stop offset="0%" stop-color="#a7f3c0"/><stop offset="100%" stop-color="#2d8a52"/></radialGradient>
    <linearGradient id="robeG" x1="0%" y1="0%" x2="0%" y2="100%"><stop offset="0%" stop-color="#1a2e1a"/><stop offset="100%" stop-color="#0a150a"/></linearGradient>
    <filter id="eyeGlow"><feGaussianBlur stdDeviation="1.5" result="blur"/><feMerge><feMergeNode in="blur"/><feMergeNode in="SourceGraphic"/></feMerge></filter>
  </defs>
  <!-- 尖耳朵 -->
  <path d="M10 32 L2 18 L16 28 Z" fill="#2d8a52"/>
  <path d="M50 32 L58 18 L44 28 Z" fill="#2d8a52"/>
  <path d="M10 32 L4 20 L15 29 Z" fill="#1a5c35" opacity="0.6"/>
  <path d="M50 32 L56 20 L45 29 Z" fill="#1a5c35" opacity="0.6"/>
  <!-- 头 -->
  <ellipse cx="30" cy="34" rx="16" ry="15" fill="url(#skinG)"/>
  <!-- 大眼睛 — 多比标志 -->
  <ellipse id="eye-l" cx="22" cy="32" rx="5" ry="6" fill="#0a1a0a" filter="url(#eyeGlow)"/>
  <ellipse id="eye-r" cx="38" cy="32" rx="5" ry="6" fill="#0a1a0a" filter="url(#eyeGlow)"/>
  <!-- 眼睛绿色虹膜 -->
  <ellipse cx="22" cy="32" rx="3.5" ry="4.5" fill="#1a6b3a"/>
  <ellipse cx="38" cy="32" rx="3.5" ry="4.5" fill="#1a6b3a"/>
  <!-- 瞳孔 -->
  <ellipse cx="22" cy="32" rx="2" ry="2.8" fill="#050f05"/>
  <ellipse cx="38" cy="32" rx="2" ry="2.8" fill="#050f05"/>
  <!-- 眼睛高光 -->
  <circle cx="23.5" cy="30" r="1.2" fill="rgba(180,255,200,0.9)"/>
  <circle cx="39.5" cy="30" r="1.2" fill="rgba(180,255,200,0.9)"/>
  <!-- 鼻子 -->
  <ellipse cx="30" cy="38" rx="2.5" ry="1.5" fill="#1a5c35" opacity="0.5"/>
  <!-- 嘴 — 细线，神秘感 -->
  <path d="M25 42 Q30 44.5 35 42" stroke="#1a4a2a" stroke-width="1.2" fill="none" stroke-linecap="round"/>
  <!-- 破旧长袍 — 不规则下摆 -->
  <path d="M16 48 Q12 50 11 58 L10 78 Q14 76 18 80 Q22 76 26 80 Q30 76 34 80 Q38 76 42 80 Q46 76 50 78 L49 58 Q48 50 44 48 Z" fill="url(#robeG)"/>
  <!-- 长袍纹理/褶皱 -->
  <path d="M22 52 L20 78" stroke="#2a3d2a" stroke-width="0.8" fill="none" opacity="0.6"/>
  <path d="M30 50 L30 80" stroke="#2a3d2a" stroke-width="0.8" fill="none" opacity="0.6"/>
  <path d="M38 52 L40 78" stroke="#2a3d2a" stroke-width="0.8" fill="none" opacity="0.6"/>
  <!-- 不规则下摆 -->
  <path d="M10 78 Q14 74 18 80 Q22 74 26 80 Q30 74 34 80 Q38 74 42 80 Q46 74 50 78" stroke="#1a2e1a" stroke-width="1" fill="none"/>
  <!-- 细长手臂 -->
  <path d="M16 52 Q8 58 6 66" stroke="#2d8a52" stroke-width="4" fill="none" stroke-linecap="round"/>
  <path d="M44 52 Q52 58 54 66" stroke="#2d8a52" stroke-width="4" fill="none" stroke-linecap="round"/>
  <!-- 手 — 细长手指 -->
  <circle cx="6" cy="67" r="4" fill="url(#skinG)"/>
  <circle cx="54" cy="67" r="4" fill="url(#skinG)"/>
  <path d="M3 65 L1 61 M5 64 L4 60 M7 64 L7 60 M9 65 L11 61" stroke="#2d8a52" stroke-width="1.2" stroke-linecap="round"/>
  <path d="M51 65 L49 61 M53 64 L52 60 M55 64 L55 60 M57 65 L59 61" stroke="#2d8a52" stroke-width="1.2" stroke-linecap="round"/>
</svg>
</div>

<script>
// 星星
const starsEl=document.getElementById('stars');
for(let i=0;i<180;i++){
  const s=document.createElement('div');s.className='star';
  const sz=Math.random()*1.4+0.4;
  s.style.cssText=`left:${Math.random()*100}%;top:${Math.random()*100}%;width:${sz}px;height:${sz}px;animation-delay:${Math.random()*6}s;animation-duration:${3+Math.random()*5}s`;
  starsEl.appendChild(s);
}
for(let i=0;i<20;i++){
  const s=document.createElement('div');s.className='star b';
  const sz=Math.random()*2.2+1.8;
  s.style.cssText=`left:${Math.random()*100}%;top:${Math.random()*100}%;width:${sz}px;height:${sz}px;animation-delay:${Math.random()*5}s;animation-duration:${2+Math.random()*4}s`;
  starsEl.appendChild(s);
}

// 问候
const h=new Date().getHours();
document.getElementById('greeting').textContent=
  h<6?'— 夜深了，辛苦了 —':h<12?'— 早上好 —':h<14?'— 中午好，记得休息 —':h<18?'— 下午好 —':'— 晚上好，放松一下 —';

// 诗句
const quotes=[
  "你已经做得很好了，\n允许自己休息一会儿。",
  "深呼吸，\n这一刻只属于你。",
  "不必急着找到答案，\n有些花需要更长的时间才会开。",
  "慢慢来，\n比较快。",
  "月亮也有看不见的一面，\n但它依然完整。",
  "此刻的安静，\n是你给自己最好的礼物。",
  "世界很大，但此刻，\n你只需要照顾好自己。",
  "不必向任何人解释你的疲惫，\n休息本身就是答案。"
];
let qi=Math.floor(Math.random()*quotes.length);
const quoteEl=document.getElementById('quote');
function showQuote(){quoteEl.innerHTML=quotes[qi].replace('\n','<br><br>');}
showQuote();
quoteEl.addEventListener('click',e=>{
  e.stopPropagation();
  quoteEl.classList.add('fading');
  setTimeout(()=>{qi=(qi+1)%quotes.length;showQuote();quoteEl.classList.remove('fading');},450);
});
setInterval(()=>{
  quoteEl.classList.add('fading');
  setTimeout(()=>{qi=(qi+1)%quotes.length;showQuote();quoteEl.classList.remove('fading');},450);
},18000);

// 涟漪
document.addEventListener('click',e=>{
  if(e.target.closest('.play-btn,.breath'))return;
  const r=document.createElement('div');r.className='ripple';
  r.style.left=e.clientX+'px';r.style.top=e.clientY+'px';
  document.body.appendChild(r);setTimeout(()=>r.remove(),1600);
});

// 音乐播放
const audio=new Audio('vem_click-rain-sound-188158.mp3');
audio.loop=true;audio.volume=0.45;
const playBtn=document.getElementById('playBtn');
const playIcon=document.getElementById('playIcon');
const musicLabel=document.getElementById('musicLabel');
const musicLabelR=document.getElementById('musicLabelR');
const pausePath='M6 19h4V5H6v14zm8-14v14h4V5h-4z';
const playPath='M8 5v14l11-7z';
let playing=false;
playBtn.addEventListener('click',e=>{
  e.stopPropagation();
  if(playing){audio.pause();playing=false;}
  else{audio.play();playing=true;}
  playIcon.querySelector('path').setAttribute('d',playing?pausePath:playPath);
  playBtn.classList.toggle('playing',playing);
  musicLabel.classList.toggle('playing',playing);
  musicLabelR.classList.toggle('playing',playing);
});
document.addEventListener('keydown',e=>{
  if(e.code==='Space'){e.preventDefault();playBtn.click();}
});

// 呼吸引导
const breathRing=document.getElementById('breathRing');
const breathText=document.getElementById('breathText');
const steps=[{t:'吸气',c:'inhale',d:4000},{t:'屏息',c:'inhale',d:1500},{t:'呼气',c:'',d:4000},{t:'停留',c:'',d:1500}];
let bi=0;
function nextBreath(){
  const s=steps[bi];
  breathText.textContent=s.t;
  breathRing.className='breath-ring '+s.c;
  bi=(bi+1)%steps.length;
  setTimeout(nextBreath,s.d);
}
setTimeout(nextBreath,3000);

// 绿精灵 — 自由漫游
const elder=document.getElementById('elder');
let ex=120,ey=200,tx=120,ty=200,flipped=false;
const elderW=60,elderH=90;
let idleTimer=null,isIdle=false;

elder.style.left=ex+'px';elder.style.top=ey+'px';

function newTarget(){
  const margin=80;
  tx=margin+Math.random()*(window.innerWidth-margin*2);
  ty=margin+Math.random()*(window.innerHeight-margin*2);
  isIdle=false;
  clearTimeout(idleTimer);
  idleTimer=setTimeout(doIdle,3000+Math.random()*4000);
}

function doIdle(){
  isIdle=true;
  const svg=elder.querySelector('svg');
  if(Math.random()>0.5){
    // 伸懒腰
    svg.classList.remove('elder-stretch','elder-wave');
    void svg.offsetWidth;
    svg.classList.add('elder-stretch');
  } else {
    // 挥手
    svg.classList.remove('elder-stretch','elder-wave');
    void svg.offsetWidth;
    svg.classList.add('elder-wave');
  }
  setTimeout(()=>{newTarget();},2000+Math.random()*3000);
}

newTarget();

setInterval(()=>{
  if(isIdle)return;
  const dx=tx-ex,dy=ty-ey;
  const dist=Math.sqrt(dx*dx+dy*dy);
  if(dist<4){newTarget();return;}
  // 根据移动方向翻转
  if(dx<-2&&!flipped){flipped=true;elder.style.transform='scaleX(-1)';}
  else if(dx>2&&flipped){flipped=false;elder.style.transform='scaleX(1)';}
  ex+=dx*0.03;ey+=dy*0.03;
  elder.style.left=Math.round(ex)+'px';elder.style.top=Math.round(ey)+'px';
},16);

// 点击互动
document.addEventListener('click',e=>{
  if(e.target.closest('.play-btn,.breath'))return;
  // 小人转向点击位置并挥手
  const cx=e.clientX,cy=e.clientY;
  if(cx<ex+28){flipped=true;elder.style.transform='scaleX(-1)';}
  else{flipped=false;elder.style.transform='scaleX(1)';}
  const svg=elder.querySelector('svg');
  svg.classList.remove('elder-wave','elder-stretch');
  void svg.offsetWidth;
  svg.classList.add('elder-wave');
  // 小粒子
  for(let i=0;i<5;i++){
    const p=document.createElement('div');p.className='magic';
    const sz=3+Math.random()*4;
    p.style.cssText=`left:${ex+elderW/2}px;top:${ey+elderH/2}px;width:${sz}px;height:${sz}px;background:rgba(74,222,128,${0.5+Math.random()*0.4});box-shadow:0 0 ${sz*2}px rgba(34,197,94,0.6);`;
    const a=(i/5)*Math.PI*2,d=20+Math.random()*30;
    p.style.setProperty('--mx',Math.cos(a)*d+'px');
    p.style.setProperty('--my',Math.sin(a)*d+'px');
    document.body.appendChild(p);setTimeout(()=>p.remove(),1000);
  }
});

function blink(){
  elder.querySelectorAll('#eye-l,#eye-r').forEach(el=>{
    const orig=el.getAttribute('ry');
    el.setAttribute('ry','0.3');
    setTimeout(()=>el.setAttribute('ry',orig),120);
  });
  setTimeout(blink,2500+Math.random()*4000);
}
setTimeout(blink,2000);
</script>
</body>
</html>
